<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	<!-- <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script> -->
	<script type="text/javascript" src="../scripts/underscore-min.js"></script>
	<script type="text/javascript" src="../scripts/lucid.js"></script>
	<!--<script type="text/javascript" src="../scripts/event-emitter.js"></script> -->
	<script type="text/javascript" src="square.js"></script>
	<script type="text/javascript" src="arimaa.js"></script>
	<script type="text/javascript" src="events.js"></script>
	<script type="text/javascript" src="error.js"></script>
	<script type="text/javascript" src="log.js"></script>
	<script type="text/javascript" src="arimaaSpecification.js"></script>
	<script type="text/javascript" src="boardState.js"></script>
	<script type="text/javascript" src="render.js"></script>
	<script type="text/javascript" src="imageLoader.js"></script>
	<script type="text/javascript" src="interactions.js"></script>	
	<script type="text/javascript" src="actions.js"></script>
</head>
<body>
	<canvas id="sandbox"></canvas>
</body>
</html>
<script type="text/javascript">
"use strict";

	var canvas = document.getElementById("sandbox"),
			spriteFilePath = "arimaa_50x50.jpg",
			canvasRenderer = null,
			arimaaBoardState = null,
			arimaaInteraction = null,
			arimaaSpec = new arimaa.specification(),
			arimaaBoardSpecification = arimaaSpec.defineBoard(),
			arimaaPieceStyle = arimaaSpec.definePieceStyle(50, 50),
			arimaaBoardStyle = arimaaSpec.defineBoardStyle(0, 0, arimaaBoardSpecification, arimaaPieceStyle),
			arimaaGameStyle = arimaaSpec.defineGameStyle(arimaaBoardStyle, arimaaPieceStyle);
		
	function synchronize(image){
		arimaaBoardState = new arimaa.boardState(arimaaBoardSpecification);
		canvasRenderer = new arimaa.canvasRenderer(canvas, arimaaSpec.createSpriteProvider(image), arimaaBoardSpecification, arimaaGameStyle);		
		arimaaInteraction = new arimaa.interactions(canvasRenderer);
		canvasRenderer.render();
	}

	arimaa.imageLoader.load(spriteFilePath, synchronize);
</script>