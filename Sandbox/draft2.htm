<html>
<head>
	<!-- <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script> -->
	  <script type="text/javascript" src="../scripts/underscore-min.js"></script>
	<script type="text/javascript" src="../scripts/lucid.js"></script>
	<script type="text/javascript" src="square.js"></script>
	<script type="text/javascript" src="arimaa.js"></script>	
	<script type="text/javascript" src="arimaaSpecification.js"></script>
	<script type="text/javascript" src="boardState.js"></script>
	<script type="text/javascript" src="render.js"></script>
	<script type="text/javascript" src="imageLoader.js"></script>
	<script type="text/javascript" src="interactions.js"></script>
</head>
<body>
	<canvas id="sandbox"></canvas>
</body>
</html>
<script type="text/javascript">
"use strict";

	var canvas = document.getElementById("sandbox"),
			spriteFilePath = "arimaa_50x50.jpg",
			canvasRenderer = null,
			arimaaBoardState = null,
			arimaaSpec = new arimaa.specification(),
			arimaaBoardSpecification = arimaaSpec.defineBoard(),
			arimaaPieceStyle = arimaaSpec.definePieceStyle(50, 50),
			arimaaBoardStyle = arimaaSpec.defineBoardStyle(0, 0, arimaaBoardSpecification, arimaaPieceStyle),
			arimaaGameStyle = arimaaSpec.defineGameStyle(arimaaBoardStyle, arimaaPieceStyle);
		
	function synchronize(image){
		arimaaBoardState = new arimaa.boardState(arimaaBoardSpecification);
		canvasRenderer = new arimaa.canvasRenderer(canvas, arimaaSpec.createSpriteProvider(image), arimaaBoardSpecification, arimaaGameStyle);
		canvasRenderer.render();
		arimaa.interactions.initialize(canvas, arimaaGameStyle);
	}

	arimaa.on('squareSelected', function(square){
		arimaa.log("seelcting on column " + square.column + " and row " + square.row);
		canvasRenderer.highlightSquare(square);
	});

	arimaa.on('squareDeselected', function(square){
		arimaa.log("deselecting column " + square.column + " and row " + square.row);
		canvasRenderer.lowlightSquare(square);
	});

	arimaa.imageLoader.load(spriteFilePath, synchronize);
</script>